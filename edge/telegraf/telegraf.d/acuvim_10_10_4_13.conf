[[inputs.modbus]]
  name = "acuvim2r"
  interval = "100ms"
  controller = "tcp://10.10.4.13:502"
  slave_id = 1

  # Keep timeout under control so a dead meter doesn’t stall forever.
  timeout = "600ms"

  configuration_type = "request"

  [[inputs.modbus.request]]
    slave_id = 1
    register = "holding"
    byte_order = "ABCD"
    measurement = "acuvim"

    fields = [
      # 0x3400–0x341D (15 float32 values, 2 registers each)

      # Phase-to-neutral volts RMS
      { address=13312, name="Va", type="FLOAT32" },
      { address=13314, name="Vb", type="FLOAT32" },
      { address=13316, name="Vc", type="FLOAT32" },

      # Line-to-line volts RMS
      { address=13318, name="Vab", type="FLOAT32" },
      { address=13320, name="Vbv", type="FLOAT32" },
      { address=13322, name="Vca", type="FLOAT32" },

      # Phase currents RMS
      { address=13324, name="Ia", type="FLOAT32" },
      { address=13326, name="Ib", type="FLOAT32" },
      { address=13328, name="Ic", type="FLOAT32" },

      # Averages
      { address=13330, name="Vln", type="FLOAT32" },
      { address=13332, name="Vll", type="FLOAT32" },
      { address=13334, name="I",    type="FLOAT32" },

      # Power + frequency
      { address=13336, name="P",     type="FLOAT32" },
      { address=13338, name="Q", type="FLOAT32" },
      { address=13340, name="F",        type="FLOAT32" }
    ]

    [inputs.modbus.request.tags]
      device = "acuvim_13"
      ip = "10.10.4.13"
      role = "power_meter"
      location = "site_1"
      node_id = "${NODE_ID}"
      deployment_id = "${DEPLOYMENT_ID}"
