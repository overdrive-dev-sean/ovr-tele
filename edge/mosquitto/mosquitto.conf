# OVR Edge Internal MQTT Broker
# This broker is for internal container communication only (no host ports exposed)

# Listen on localhost only (host network mode, don't expose to LAN)
listener 1883 127.0.0.1

# Allow anonymous connections (internal use only - not exposed to host)
allow_anonymous true

# Persistence for retained messages
persistence true
persistence_location /mosquitto/data/

# Logging
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information

# Connection settings
max_keepalive 120

# ============================================
# Cloud Bridge Configuration
# Forwards ovr/# topics to cloud MQTT broker for fleet map realtime
# ============================================
connection cloud-bridge
address 5.78.73.219:1883
remote_username ovr-bridge
remote_password devpassword123
topic ovr/# out 1
bridge_protocol_version mqttv311
cleansession true
start_type automatic
notifications false
try_private false
